<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pseintia - Nivel 1 Â· Exploradores</title>
  <style>
    :root{ --ink:#eaf2ff; --neon:#22c55e; --muted:#2a3b66; }
    *{ box-sizing:border-box }
    body{
      margin:0; min-height:100vh; display:flex; flex-direction:column;
      font-family:Poppins,system-ui,Segoe UI,Arial,sans-serif; color:var(--ink);
      background: radial-gradient(1100px 560px at 50% -180px,#142a58 38%,#050913 70%);
    }
    header{
      text-align:center; padding:14px 16px; background:#162543; border-bottom:3px solid var(--neon);
      box-shadow:0 0 16px rgba(34,197,94,.6);
    }
    header h1{ margin:0; font-size:1.9rem; letter-spacing:.3px }
    #wrap{ flex:1; display:flex; gap:22px; max-width:1200px; margin:22px auto; padding:0 14px }
    #book,#play{
      flex:1; border:2px solid var(--neon); border-radius:14px; padding:20px;
      background:linear-gradient(180deg,rgba(22,34,66,.95),rgba(10,20,38,.92));
      box-shadow:0 0 18px rgba(34,197,94,.45); overflow:auto; max-height:calc(100vh - 170px)
    }
    h3{ margin:.2rem 0 1rem 0 }
    .badge{ display:inline-block; padding:4px 10px; border:1px solid var(--neon); border-radius:999px; font-size:.85rem }
    .section-title{ display:flex; align-items:center; gap:10px }
    .progressbar{ width:100%; background:var(--muted); height:14px; border-radius:8px; overflow:hidden; margin:.6rem 0 0 0 }
    .progress{ height:100%; width:0%; background:var(--neon); transition:width .25s ease }
    .block{ background:#0f1e3a; border:1px solid #254075; border-radius:12px; padding:14px 16px; margin-bottom:12px }
    .block h4{ margin:.2rem 0 .5rem 0 }
    .city{ background:#0c1833; border:1px dashed #2e4a88 }
    .hint{ opacity:.9; margin:-6px 0 10px 0 }
    .card{ background:#0b1630; border:1px solid #203b70; border-radius:12px; padding:14px 16px }
    .choices{ display:flex; flex-direction:column; gap:8px }
    button.choice{
      background:var(--neon); color:#072317; border:none; border-radius:10px;
      padding:10px 12px; font-weight:700; text-align:left; cursor:pointer
    }
    button.choice:hover{ filter:brightness(1.05) }
    .msg{ margin-top:8px }
    footer{
      text-align:center; padding:10px 14px; background:#0d1324; border-top:2px solid var(--neon);
      color:#aeb9d6; font-size:.95rem
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸŒŒ Pseintia â€” Nivel 1 Â· Exploradores</h1>
  </header>

  <main id="wrap">
    <!-- ğŸ“– LIBRO DE LA SABIDURÃA -->
    <section id="book" aria-live="polite">
      <div class="section-title">
        <h3>ğŸ“– Libro de la SabidurÃ­a</h3>
        <span class="badge" id="badge">LecciÃ³n 1/4</span>
      </div>
      <h3 id="title">ğŸ›ï¸ Plaza Algoritmia</h3>
      <div id="theory"></div>

      <div class="progressbar"><div class="progress" id="pbar"></div></div>
      <p><b>Progreso de la lecciÃ³n:</b> <span id="ptext">0/10</span></p>
    </section>

    <!-- ğŸ® RETOS -->
    <section id="play" aria-live="polite">
      <div class="section-title"><h3>ğŸ® Retos</h3></div>
      <p class="hint"><em>InstrucciÃ³n:</em> Selecciona la <b>opciÃ³n correcta</b> para avanzar. Las respuestas se mezclan en cada intento.</p>
      <h3 id="ctitle">Reto 1</h3>
      <div id="challenge"></div>
    </section>
  </main>

  <footer>Aprendiendo con @LaProfeVivy âœ¨</footer>

  <script>
    // ---------- TEORÃA (concepto + caso de ciudad) ----------
    const Theory = {
      plaza: `
        <div class="block">
          <h4>ğŸ§  Â¿QuÃ© es un algoritmo?</h4>
          <ul>
            <li>Conjunto <b>finito</b> de pasos ordenados para resolver un problema.</li>
            <li><b>CaracterÃ­sticas:</b> claridad, orden, finitud, entradas/salidas, generalidad.</li>
            <li><b>Representaciones:</b> texto, diagrama de flujo y <b>pseudocÃ³digo</b>.</li>
          </ul>
        </div>
        <div class="block city">
          <h4>ğŸ›ï¸ Caso: Plaza Algoritmia</h4>
          <p>Las baldosas digitales se encienden solo si los pasos estÃ¡n en orden. Drones y robots se
          confundieron; reordena procesos para restaurar el corazÃ³n de Pseintia.</p>
        </div>
      `,
      parque: `
        <div class="block">
          <h4>ğŸ§  Variables y tipos</h4>
          <ul>
            <li>Una <b>variable</b> guarda informaciÃ³n que puede cambiar.</li>
            <li>Tipos: <b>numÃ©rico</b>, <b>texto</b> y <b>lÃ³gico</b> (verdadero/falso).</li>
            <li>Buenos nombres: sin espacios, claros y coherentes.</li>
          </ul>
        </div>
        <div class="block city">
          <h4>ğŸŒ± Caso: Parque de Variables</h4>
          <p>Ãrboles luminosos almacenan datos en hojas digitales. Sin valores, el parque queda a oscuras.
          Asigna e interpreta variables para devolverles la luz.</p>
        </div>
      `,
      taller: `
        <div class="block">
          <h4>ğŸ§  Operaciones</h4>
          <ul>
            <li>AritmÃ©ticos: +, âˆ’, Ã—, Ã·, % (mÃ³dulo).</li>
            <li>Relacionales: &gt;, &lt;, ==, !=, &gt;=, &lt;= (devuelven verdadero/falso).</li>
            <li>LÃ³gicos: Y, O, NO. Usa <b>parÃ©ntesis</b> para aclarar precedencia.</li>
            <li>ConcatenaciÃ³n de texto para formar mensajes.</li>
          </ul>
        </div>
        <div class="block city">
          <h4>âš™ï¸ Caso: Taller de Operatoria</h4>
          <p>Las mÃ¡quinas convierten cÃ¡lculos en energÃ­a. Si una operaciÃ³n falla, una zona de Pseintia se apaga.
          ActÃ­valas resolviendo operaciones correctas.</p>
        </div>
      `,
      barrio: `
        <div class="block">
          <h4>ğŸ§  Secuencias de instrucciones</h4>
          <ul>
            <li>Las instrucciones se ejecutan <b>en orden</b>.</li>
            <li>El resultado <b>depende</b> del orden (antes/despuÃ©s).</li>
            <li>En pseudocÃ³digo: escribir paso a paso (<i>Leer</i>, <i>Escribir</i>, etc.).</li>
          </ul>
        </div>
        <div class="block city">
          <h4>ğŸ˜ï¸ Caso: Barrio Secuencial</h4>
          <p>Reprograma rutas de robots, semÃ¡foros y portones para que el barrio vuelva a fluir.</p>
        </div>
      `
    };

    // ---------- LECCIONES Y RETOS (40 en total) ----------
    const Lessons = [
      { // 1) Plaza Algoritmia
        badge:"LecciÃ³n 1/4", title:"ğŸ›ï¸ Plaza Algoritmia", theory:Theory.plaza,
        retos:[
          {q:"Camino roto: Â¿quÃ© orden permite que el dron cruce la plaza?",
            options:[
              {t:"Avanzar â†’ Girar â†’ Avanzar â†’ Llegar", ok:true},
              {t:"Girar â†’ Avanzar â†’ Llegar â†’ Avanzar", ok:false},
              {t:"Llegar â†’ Avanzar â†’ Girar â†’ Avanzar", ok:false},
              {t:"Avanzar â†’ Llegar â†’ Girar â†’ Avanzar", ok:false}
            ]},
          {q:"Fuente central: orden correcto para encenderla",
            options:[
              {t:"Encender bomba â†’ Abrir vÃ¡lvula â†’ Activar luces", ok:true},
              {t:"Activar luces â†’ Abrir vÃ¡lvula â†’ Encender bomba", ok:false},
              {t:"Abrir vÃ¡lvula â†’ Encender bomba â†’ Activar luces", ok:false},
              {t:"Encender bomba â†’ Activar luces â†’ Abrir vÃ¡lvula", ok:false}
            ]},
          {q:"TranvÃ­a elÃ©ctrico: secuencia vÃ¡lida",
            options:[
              {t:"Abrir puertas â†’ Subir pasajeros â†’ Cerrar puertas â†’ Arrancar", ok:true},
              {t:"Cerrar puertas â†’ Arrancar â†’ Abrir puertas â†’ Subir pasajeros", ok:false},
              {t:"Subir pasajeros â†’ Cerrar puertas â†’ Arrancar â†’ Abrir puertas", ok:false},
              {t:"Abrir puertas â†’ Cerrar puertas â†’ Subir pasajeros â†’ Arrancar", ok:false}
            ]},
          {q:"Kiosko automÃ¡tico: preparar un jugo",
            options:[
              {t:"Recibir pedido â†’ Tomar vaso â†’ Llenar vaso â†’ Entregar", ok:true},
              {t:"Tomar vaso â†’ Entregar â†’ Recibir pedido â†’ Llenar vaso", ok:false},
              {t:"Recibir pedido â†’ Llenar vaso â†’ Tomar vaso â†’ Entregar", ok:false},
              {t:"Recibir pedido â†’ Entregar â†’ Tomar vaso â†’ Llenar vaso", ok:false}
            ]},
          {q:"Dron guÃ­a turÃ­stico: ruta mÃ­nima",
            options:[
              {t:"Ir recto â†’ Girar â†’ Llegar a torre", ok:true},
              {t:"Girar â†’ Llegar a torre â†’ Ir recto", ok:false},
              {t:"Llegar a torre â†’ Ir recto â†’ Girar", ok:false},
              {t:"Girar â†’ Ir recto â†’ Llegar a torre", ok:false}
            ]},
          {q:"Escaleras hologrÃ¡ficas: sincronizaciÃ³n",
            options:[
              {t:"Encender holograma â†’ Proyectar escalones â†’ Asegurar pasamanos", ok:true},
              {t:"Proyectar escalones â†’ Asegurar pasamanos â†’ Encender holograma", ok:false},
              {t:"Asegurar pasamanos â†’ Encender holograma â†’ Proyectar escalones", ok:false},
              {t:"Proyectar escalones â†’ Encender holograma â†’ Asegurar pasamanos", ok:false}
            ]},
          {q:"Patrulla robÃ³tica: ronda correcta",
            options:[
              {t:"Norte â†’ Este â†’ Sur â†’ Oeste", ok:true},
              {t:"Oeste â†’ Sur â†’ Este â†’ Norte", ok:false},
              {t:"Este â†’ Norte â†’ Oeste â†’ Sur", ok:false},
              {t:"Norte â†’ Sur â†’ Este â†’ Oeste", ok:false}
            ]},
          {q:"Robot de limpieza: orden adecuado",
            options:[
              {t:"Encender agua â†’ Barrer â†’ Aspirar â†’ Secar", ok:true},
              {t:"Barrer â†’ Secar â†’ Encender agua â†’ Aspirar", ok:false},
              {t:"Aspirar â†’ Encender agua â†’ Barrer â†’ Secar", ok:false},
              {t:"Secar â†’ Barrer â†’ Aspirar â†’ Encender agua", ok:false}
            ]},
          {q:"Pantalla informativa: mensajes en secuencia",
            options:[
              {t:"Bienvenido â†’ Nombre del visitante â†’ Mensaje final", ok:true},
              {t:"Nombre del visitante â†’ Bienvenido â†’ Mensaje final", ok:false},
              {t:"Mensaje final â†’ Bienvenido â†’ Nombre", ok:false},
              {t:"Bienvenido â†’ Mensaje final â†’ Nombre", ok:false}
            ]},
          {q:"Escudo de la Plaza: arranque seguro",
            options:[
              {t:"Iniciar â†’ Verificar sensores â†’ Cargar energÃ­a â†’ Activar nÃºcleo â†’ Desplegar escudo", ok:true},
              {t:"Cargar energÃ­a â†’ Iniciar â†’ Activar nÃºcleo â†’ Verificar sensores â†’ Desplegar escudo", ok:false},
              {t:"Verificar sensores â†’ Desplegar escudo â†’ Activar nÃºcleo â†’ Cargar energÃ­a â†’ Iniciar", ok:false},
              {t:"Iniciar â†’ Cargar energÃ­a â†’ Desplegar escudo â†’ Verificar sensores â†’ Activar nÃºcleo", ok:false}
            ]}
        ]
      },
      { // 2) Parque de Variables
        badge:"LecciÃ³n 2/4", title:"ğŸŒ± Parque de Variables", theory:Theory.parque,
        retos:[
          {q:"Â¿AsignaciÃ³n vÃ¡lida para nombre?",
            options:[
              {t:'nombre â† "Ana"', ok:true},
              {t:"nombre â† 22", ok:false},
              {t:"nombre â† verdadero", ok:false},
              {t:"nombre â† nombre + 1", ok:false}
            ]},
          {q:"Edad de un ciudadano:",
            options:[
              {t:"edad â† 21", ok:true},
              {t:'edad â† "veintiuno"', ok:false},
              {t:"edad â† verdadero", ok:false},
              {t:'edad â† "21 aÃ±os"', ok:false}
            ]},
          {q:"Las flores booleanas se encienden con:",
            options:[
              {t:"verdadero", ok:true},
              {t:'"sÃ­"', ok:false},
              {t:"1.5", ok:false},
              {t:'"encender"', ok:false}
            ]},
          {q:"Color de luz del Ã¡rbol (valor correcto):",
            options:[
              {t:'color â† "Azul"', ok:true},
              {t:"color â† 255", ok:false},
              {t:"color â† verdadero", ok:false},
              {t:"color â† nombre", ok:false}
            ]},
          {q:"ConcatenaciÃ³n de saludo en pantalla:",
            options:[
              {t:'saludo â† "Hola " + nombre', ok:true},
              {t:'saludo â† "Hola " - nombre', ok:false},
              {t:'saludo â† "Hola ", nombre', ok:false},
              {t:'saludo â† nombre - "Hola"', ok:false}
            ]},
          {q:"Destino del robot guÃ­a:",
            options:[
              {t:'destino â† "Torre Central"', ok:true},
              {t:"destino â† 1024.3", ok:false},
              {t:"destino â† verdadero", ok:false},
              {t:"destino â† edad", ok:false}
            ]},
          {q:"Estado del dron de control:",
            options:[
              {t:"activo â† verdadero", ok:true},
              {t:'activo â† "true"', ok:false},
              {t:"activo â† 2", ok:false},
              {t:"activo â† color", ok:false}
            ]},
          {q:"Inicializa la variable carrera:",
            options:[
              {t:'carrera â† "IngenierÃ­a"', ok:true},
              {t:"carrera â†", ok:false},
              {t:"carrera â† verdadero", ok:false},
              {t:"carrera â† 3*nombre", ok:false}
            ]},
          {q:"Tipo correcto para la variable edad:",
            options:[
              {t:"NumÃ©rico", ok:true},
              {t:"Texto", ok:false},
              {t:"LÃ³gico", ok:false},
              {t:"Fecha", ok:false}
            ]},
          {q:"La Ficha de Ciudadano debe incluir:",
            options:[
              {t:"nombre, edad, carrera, colorFavorito", ok:true},
              {t:"solo edad", ok:false},
              {t:"carrera y activo", ok:false},
              {t:"nombre y destino", ok:false}
            ]}
        ]
      },
      { // 3) Taller de Operatoria
        badge:"LecciÃ³n 3/4", title:"âš™ï¸ Taller de Operatoria", theory:Theory.taller,
        retos:[
          {q:"Generador de suma:",
            options:[
              {t:"resultado â† 3 + 2", ok:true},
              {t:"resultado â† 3 Ã— 2", ok:false},
              {t:"resultado â† 3 / 2", ok:false},
              {t:"resultado â† 3 âˆ’ 2", ok:false}
            ]},
          {q:"Resta de recursos correcta:",
            options:[
              {t:"faltan â† 10 âˆ’ 4", ok:true},
              {t:"faltan â† 10 + 4", ok:false},
              {t:"faltan â† 10 Ã— 4", ok:false},
              {t:"faltan â† 10 Ã· 4", ok:false}
            ]},
          {q:"Multiplicador de suministros:",
            options:[
              {t:"total â† precio * cantidad", ok:true},
              {t:"total â† precio + cantidad", ok:false},
              {t:"total â† precio / cantidad", ok:false},
              {t:"total â† cantidad âˆ’ precio", ok:false}
            ]},
          {q:"DivisiÃ³n de energÃ­a por drones:",
            options:[
              {t:"parte â† 100 / 5", ok:true},
              {t:"parte â† 100 * 5", ok:false},
              {t:"parte â† 100 âˆ’ 5", ok:false},
              {t:"parte â† 100 + 5", ok:false}
            ]},
          {q:"Comparador de baterÃ­as (robot A con mÃ¡s carga):",
            options:[
              {t:"bateriaA &gt; bateriaB", ok:true},
              {t:"bateriaA == bateriaB", ok:false},
              {t:"bateriaA + bateriaB", ok:false},
              {t:"bateriaA &lt; bateriaB", ok:false}
            ]},
          {q:"TermÃ³metro digital por debajo del umbral:",
            options:[
              {t:"temperatura &lt; 30", ok:true},
              {t:'temperatura = "baja"', ok:false},
              {t:"temperatura + 30", ok:false},
              {t:"30 &lt; temperatura == verdadero", ok:false}
            ]},
          {q:"ConcatenaciÃ³n de saludo:",
            options:[
              {t:'mensaje â† "Hola " + nombre', ok:true},
              {t:'mensaje â† "Hola " - nombre', ok:false},
              {t:"mensaje â† nombre / Hola", ok:false},
              {t:"mensaje â† verdadero + nombre", ok:false}
            ]},
          {q:"Prioridad correcta de operaciones:",
            options:[
              {t:"resultado â† (3 + 2) * 5", ok:true},
              {t:"resultado â† 3 + 2 * 5 (sin parÃ©ntesis)", ok:false},
              {t:"resultado â† 3 + (2 * 5) - 0 sin parÃ©ntesis", ok:false},
              {t:"resultado â† 3 + 2 * (5 âˆ’ 5) + 5", ok:false}
            ]},
          {q:"Â¿QuÃ© operaciÃ³n es invÃ¡lida?",
            options:[
              {t:"5 / 0", ok:true},
              {t:"(8 âˆ’ 3) * 2", ok:false},
              {t:"10 % 3", ok:false},
              {t:"4 + 4 * 2", ok:false}
            ]},
          {q:"Para encender el taller principal se requiere:",
            options:[
              {t:"usar suma, resta y multiplicaciÃ³n", ok:true},
              {t:"solo resta", ok:false},
              {t:"sÃ³lo concatenar textos", ok:false},
              {t:"ninguna operaciÃ³n", ok:false}
            ]}
        ]
      },
      { // 4) Barrio Secuencial
        badge:"LecciÃ³n 4/4", title:"ğŸ˜ï¸ Barrio Secuencial", theory:Theory.barrio,
        retos:[
          {q:"Robot mensajero (entrega correcta):",
            options:[
              {t:"Ir â†’ Recoger â†’ Entregar", ok:true},
              {t:"Entregar â†’ Ir â†’ Recoger", ok:false},
              {t:"Recoger â†’ Entregar â†’ Ir", ok:false},
              {t:"Ir â†’ Entregar â†’ Recoger", ok:false}
            ]},
          {q:"Cinta transportadora hacia dron:",
            options:[
              {t:"Activar cinta â†’ Mover paquete â†’ Entregar al dron", ok:true},
              {t:"Mover paquete â†’ Entregar â†’ Activar cinta", ok:false},
              {t:"Entregar â†’ Activar cinta â†’ Mover", ok:false},
              {t:"Activar â†’ Entregar â†’ Mover", ok:false}
            ]},
          {q:"PortÃ³n digital de seguridad:",
            options:[
              {t:"Abrir â†’ Revisar â†’ Cerrar", ok:true},
              {t:"Revisar â†’ Abrir â†’ Cerrar", ok:false},
              {t:"Cerrar â†’ Revisar â†’ Abrir", ok:false},
              {t:"Abrir â†’ Cerrar â†’ Revisar", ok:false}
            ]},
          {q:"SemÃ¡foro inteligente:",
            options:[
              {t:"Verde â†’ Amarillo â†’ Rojo", ok:true},
              {t:"Rojo â†’ Verde â†’ Amarillo", ok:false},
              {t:"Amarillo â†’ Rojo â†’ Verde", ok:false},
              {t:"Verde â†’ Rojo â†’ Amarillo", ok:false}
            ]},
          {q:"Puente retrÃ¡ctil sobre el rÃ­o de datos:",
            options:[
              {t:"Bajar â†’ Cruzar â†’ Subir", ok:true},
              {t:"Subir â†’ Bajar â†’ Cruzar", ok:false},
              {t:"Cruzar â†’ Bajar â†’ Subir", ok:false},
              {t:"Bajar â†’ Subir â†’ Cruzar", ok:false}
            ]},
          {q:"Casa inteligente (bienvenida):",
            options:[
              {t:"Encender luces â†’ MÃºsica â†’ Pantalla", ok:true},
              {t:"Pantalla â†’ MÃºsica â†’ Luces", ok:false},
              {t:"MÃºsica â†’ Pantalla â†’ Luces", ok:false},
              {t:"Luces â†’ Pantalla â†’ MÃºsica", ok:false}
            ]},
          {q:"Despacho de drones de reparto:",
            options:[
              {t:"Preparar paquete â†’ Cargar â†’ Enviar", ok:true},
              {t:"Enviar â†’ Preparar â†’ Cargar", ok:false},
              {t:"Cargar â†’ Enviar â†’ Preparar", ok:false},
              {t:"Preparar â†’ Enviar â†’ Cargar", ok:false}
            ]},
          {q:"EstaciÃ³n de recarga:",
            options:[
              {t:"Conectar â†’ Cargar â†’ Desconectar", ok:true},
              {t:"Desconectar â†’ Cargar â†’ Conectar", ok:false},
              {t:"Cargar â†’ Desconectar â†’ Conectar", ok:false},
              {t:"Conectar â†’ Desconectar â†’ Cargar", ok:false}
            ]},
          {q:"Pasarela hologrÃ¡fica:",
            options:[
              {t:"Encender proyector â†’ Mostrar escalones", ok:true},
              {t:"Mostrar escalones â†’ Encender proyector", ok:false},
              {t:"Subir escalones â†’ Encender proyector", ok:false},
              {t:"Encender proyector â†’ Subir escalones â†’ Mostrar", ok:false}
            ]},
          {q:"Turista robot (pseudocÃ³digo breve):",
            options:[
              {t:"Paso1 â†’ Paso2 â†’ Paso3 â†’ Paso4", ok:true},
              {t:"Paso4 â†’ Paso3 â†’ Paso2 â†’ Paso1", ok:false},
              {t:"Paso1 â†’ Paso3 â†’ Paso2 â†’ Paso4", ok:false},
              {t:"Paso2 â†’ Paso1 â†’ Paso4 â†’ Paso3", ok:false}
            ]}
        ]
      }
    ];

    // ---------- LÃ“GICA ----------
    const $ = id => document.getElementById(id);
    let L = 0;  // Ã­ndice de lecciÃ³n
    let R = 0;  // Ã­ndice de reto

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function renderBook(){
      const cur = Lessons[L];
      $("badge").textContent = cur.badge;
      $("title").textContent = cur.title;
      $("theory").innerHTML = cur.theory;
      $("pbar").style.width = `${(R/10)*100}%`;
      $("ptext").textContent = `${R}/10`;
    }

    function renderChallenge(){
      const cur = Lessons[L], reto = cur.retos[R];
      $("ctitle").textContent = `Reto ${R+1}`;
      const opts = shuffle(reto.options.map(o => ({...o}))); // copiar y mezclar
      let html = `<div class="card"><p>${reto.q}</p><div class="choices">`;
      for(const o of opts){
        html += `<button class="choice" onclick="check(${o.ok})">${o.t}</button>`;
      }
      html += `</div><div id="msg" class="msg"></div></div>`;
      $("challenge").innerHTML = html;
      $("pbar").style.width = `${(R/10)*100}%`;
      $("ptext").textContent = `${R}/10`;
    }

    function check(isOk){
      const msg = $("msg");
      if(isOk){
        msg.textContent = "âœ… Â¡Correcto!";
        setTimeout(()=>{
          R++;
          if(R>=10){
            L++;
            if(L>=Lessons.length){
              // fin del nivel
              $("book").innerHTML = `
                <div class="section-title"><h3>ğŸ“– Libro de la SabidurÃ­a</h3></div>
                <h3>ğŸ† Nivel completado</h3>
                <div class="block"><p>Â¡Felicitaciones! Eres <b>Explorador Oficial de Pseintia</b>.
                Restauraste Plaza Algoritmia, Parque de Variables, Taller de Operatoria y Barrio Secuencial.</p></div>`;
              $("play").innerHTML = `<h3>ğŸ‰ Â¡Terminaste los 40 retos!</h3>
                <p>PrepÃ¡rate para el Nivel 2: <b>Constructores de Pseintia</b>.</p>`;
              return;
            }
            R = 0; // reiniciar retos de la nueva lecciÃ³n
            renderBook();
            renderChallenge();
          }else{
            renderChallenge();
          }
        }, 400);
      }else{
        msg.textContent = "âŒ Incorrecto. Intenta nuevamente.";
      }
    }

    // InicializaciÃ³n
    renderBook();
    renderChallenge();
  </script>
</body>
</html>

